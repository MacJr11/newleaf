{% extends "base.html" %}
{% block content %}
<div class="main-wrapper">
    <div class="page-wrapper">

        <div class="invoice-container" id="invoiceArea">
        
            <!-- Header -->
            <div class="invoice-header">
                <h2>Invoice</h2>
                <p><strong>Invoice No:</strong> {{ invoice.id }}</p>
                <p><strong>Date:</strong> {{ invoice.issued_date|date:"d M Y" }}</p>
            </div>
        
            <!-- Client & Project Info -->
            <div class="invoice-info">
                <div>
                    <span>
                        <h4> <strong>Bill To:</strong>{{ po.client.name }}</h4>
                        <p>{{ po.client.contact_email }}</p>
                    </span>
                </div>
                <div>
                    <h4>Project:</h4>
                    <p>{{ po.po_number }}</p>
                    <p>Status: {{ po.status }}</p>
                </div>
            </div>
        
            <!-- Items Table -->
            <table class="invoice-table">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Quantity</th>
                        <th>Unit Price (GHS)</th>
                        <th>Total (GHS)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order_items %}
                    <tr>
                        <td>{{ item.description }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.unit_price|floatformat:2 }}</td>
                        <td>{{ item.line_total|floatformat:2 }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        
            <!-- Totals -->
            <div class="invoice-totals">
                <p><strong>Grand Total:</strong> GHS {{ grand_total|floatformat:2 }}</p>
            </div>
        
        </div>
    </div>
</div>

<!-- Print Button -->
<div class="text-center mt-4">
    <button onclick="printInvoice()" class="btn btn-primary">Print Invoice</button>
</div>

<style>
.invoice-container {
    max-width: 800px;
    margin: auto;
    padding: 20px;
    background: #fff;
    border: 1px solid #ddd;
    font-family: Arial, sans-serif;
    color: #333;
}

.invoice-header {
    text-align: center;
    margin-bottom: 20px;
}

.invoice-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
}

.invoice-info h4 {
    margin-bottom: 5px;
}

.invoice-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

.invoice-table th, .invoice-table td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
}

.invoice-totals {
    text-align: right;
    font-size: 1.1em;
}
</style>

<script>
function printInvoice() {
    const printContents = document.getElementById('invoiceArea').innerHTML;
    const originalContents = document.body.innerHTML;
    document.body.innerHTML = printContents;
    window.print();
    document.body.innerHTML = originalContents;
    location.reload();
}
</script>
{% endblock %}
